# 产品需求文档 (PRD)

## 项目概述

### 项目名称
图片字幕生成器

### 项目描述
一个Web应用，允许用户上传一张图片和多行文本，自动生成一张带多行字幕的图片。生成的图片包含原图在上方，下方字幕区域中多行文本以叠加效果展示，每行字幕使用原图的一部分作为底图。

### 目标用户
需要为图片添加字幕并生成多张变体的用户

---

## 功能需求

### 1. 图片上传功能
- **需求描述**：用户可以通过拖拽或点击上传一张图片
- **支持格式**：JPG, PNG, GIF, WebP
- **文件大小限制**：最大 10MB
- **交互方式**：
  - 支持拖拽上传
  - 支持点击选择文件
  - 显示上传进度和预览

### 2. 文本输入功能
- **需求描述**：用户可以输入多行文本，每行文本将作为独立的字幕
- **输入方式**：多行文本输入框（Textarea）
- **功能要求**：
  - 支持手动输入多行文本
  - 每行文本对应一个字幕
  - 支持换行分隔
  - 显示文本行数统计

### 3. 图片生成功能
- **需求描述**：点击"生成"按钮后，生成一张包含原图和多行字幕的合成图片
- **生成规则**：
  - 原图显示在合成图片的上方
  - 在图片底部添加字幕区域
  - 字幕区域中，每行文本作为一个独立的字幕层
  - 每个字幕层使用原图的一部分作为底图（多份原图叠加作为字幕背景）
  - 字幕文本叠在底图上，形成叠加效果
  - 字幕样式：白色文字，黑色半透明背景，居中显示
  - 最终生成一张完整的合成图片

### 4. 结果展示功能
- **需求描述**：展示生成的一张合成图片，图片中包含原图和下方叠加的多行字幕
- **展示方式**：
  - 显示一张完整的合成图片
  - 图片上方为原图
  - 图片下方为字幕区域，多行字幕以叠加效果展示
  - 每行字幕使用原图的一部分作为底图，形成多层叠加的视觉效果
  - 支持下载生成的合成图片

---

## 技术需求

### 前端技术栈
- HTML5
- CSS3
- JavaScript (原生或使用Canvas API)
- 图片处理：Canvas API

### 核心功能实现
1. **文件上传处理**
   - 使用 `<input type="file">` 或拖拽API
   - 使用 FileReader API 读取图片

2. **图片处理**
   - 使用 Canvas API 绘制图片和文字
   - 计算字幕位置和样式
   - 将原图复制多份作为字幕区域的底图
   - 在每层底图上绘制对应的字幕文本
   - 将所有图层合成一张完整的图片

---

## UI/UX 需求

### 页面布局
1. **顶部区域**：标题和说明
2. **上传区域**：
   - 图片上传框（带预览）
   - 文本输入框
   - 生成按钮
3. **结果展示区域**：
   - 合成图片展示（包含原图和叠加字幕）
   - 下载按钮

### 交互流程
1. 用户上传图片 → 显示预览
2. 用户输入多行文本 → 显示行数
3. 用户点击"生成" → 显示加载状态
4. 生成完成 → 展示包含原图和叠加字幕的合成图片

### 视觉设计
- 简洁现代的界面
- 清晰的按钮和输入框
- 良好的响应式设计
- 加载状态提示

---

## 非功能需求

### 性能要求
- 图片处理时间 < 5秒
- 支持最多50行文本同时处理
- 浏览器兼容性：Chrome, Firefox, Safari, Edge (最新版本)

### 用户体验
- 提供清晰的错误提示
- 支持撤销和重新生成
- 提供使用说明

---

## 验收标准

1. ✅ 用户可以成功上传图片并看到预览
2. ✅ 用户可以输入多行文本
3. ✅ 点击生成后，能够生成一张包含原图和叠加字幕的合成图片
4. ✅ 生成的图片中，原图在上方，下方字幕区域中多行字幕以叠加效果正确展示
5. ✅ 每行字幕使用原图的一部分作为底图
6. ✅ 用户可以下载生成的合成图片
7. ✅ 界面响应流畅，无明显卡顿

---

## 未来优化方向

1. 字幕样式自定义（字体、颜色、位置）
2. 支持批量下载为ZIP文件
3. 支持更多图片格式
4. 添加图片滤镜效果
5. 支持字幕动画效果
6. 保存历史记录

---

## 版本规划

### V1.0 (当前版本)
- 基础图片上传
- 多行文本输入
- 单张合成图片生成（原图+叠加字幕）
- 字幕底图使用原图的一部分
- 合成图片下载

### V1.1 (后续版本)
- 字幕样式自定义（字体、颜色、位置）
- 字幕底图样式调整
- 历史记录

---

文档创建日期：2026-01-27
测试提交